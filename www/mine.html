<div id="spacer-mine" class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Natural resources</h3>
  </div>
  <div class="panel-body">
    <div class="btn-group" role="group">
      <button type="button" class="minable    btn btn-default" id="spacer-mine-water">Collect water</button>
      <button type="button" class="minable    btn btn-default" id="spacer-mine-ore">Mine ore</button>
      <button type="button" class="minable    btn btn-default" id="spacer-mine-chem">Rare earths/gas</button>
    </div>
    <br>
    <div id="spacer-mine-msgs"></div>
  </div>
</div>

<script type="text/javascript">

$(function() {
  let msg;

  let mine = function(resource, success_msg, fail_msg) {
    if (msg) msg.detach();
    let tics = data.resources[resource].mine.tics;

    if (game.place().mine(resource)) {
      game.player().inventory.inc(resource, 1);
      msg = new Notice('info', success_msg);
    }
    else {
      msg = new Notice('alert', fail_msg);
    }

    for (var i = 0; i < tics; ++i) {
      game.turn();
    }

    msg.attach('#spacer-mine-msgs');
  };

  if (game.place().minability > 0) {
    $('#spacer-mine-water').click((e) => { mine('water', 'You acquired 1 unit of water from the planet\'s surface.', 'The well was dry.') });
    $('#spacer-mine-ore').click((e)   => { mine('ore', 'You acquired 1 unit of ore from the planet\'s surface.', 'No luck!') });
    $('#spacer-mine-chem').click((e)  => { mine('chemicals', 'You acquired 1 unit of chemicals.', 'No luck!') });
  }
  else {
    $('.minable').attr('disabled', 'true');
  }
});

</script>
